var b;chrome.runtime.getBackgroundPage(function(Window){b=Window});try{var language=chrome.i18n.getUILanguage();moment.locale([language,"en"])}catch(err){}Array.prototype.diff=function(a){return this.filter(function(i){return!(a.indexOf(i)>-1)})};Array.prototype.toObject=function(){var rv={};for(var i=0;i<this.length;++i)if(this[i]!==undefined)rv[i]=this[i];return rv};Object.size=function(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key))size++}return size};function isNumber(o){return typeof o==="number"&&isFinite(o)}function getHostname(url){if(typeof url!="undefined"&&url.indexOf("http")==0){return url.split(/\/+/g)[1]}else{return}}function validateUrl(url){var pattern=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return pattern.test(url)}function validateEmail(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)}function fixUrl(url){if(!url)return url;if(url.indexOf("http://")!=0&&url.indexOf("https://")!=0&&url.indexOf("smtp://")!=0&&url.indexOf("ftp://")!=0&&url.indexOf("rtp://")!=0&&url.indexOf("irc://")!=0&&url.indexOf("file://")!=0&&url.indexOf("chrome://")!=0&&url.indexOf("snmp://")!=0&&url.indexOf("chrome-extension")==-1){url="http://"+url}return url}function strstr(haystack,needle,bool){var pos=0;haystack+="";pos=haystack.indexOf(needle);if(pos==-1){return false}else{if(bool){return haystack.substr(0,pos)}else{return haystack.slice(pos)}}}function loadScript(path){if($('script[src="'+path+'"]').length>0){return}var script=document.createElement("script");script.type="text/javascript";script.src=path;document.body.appendChild(script)}function safestr(str){if(jQuery!==undefined){return jQuery("<div/>").text(str).html()}return str.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function i18n(m){var s=chrome.i18n.getMessage(m);return s?s:m}function show_message(text,autoclose,time){$("#message").stop();$("#message").stop().html(text).fadeIn(50).animate({opacity:"1"},1e3,function(){if(autoclose!==true){$("#message").fadeOut(500)}else{setTimeout(function(){$("#message").hide(100)},time||600)}})}function hide_message(speed){$("#message").stop().fadeOut(speed||200)}$(function(){$("*[i18n]").each(function(){if(i18n($(this).attr("i18n"))){$(this).html(i18n($(this).attr("i18n")))}});$("*[i18n-placeholder]").each(function(){$(this).attr("placeholder",i18n($(this).attr("i18n-placeholder")))});$("*[i18n-title]").each(function(){$(this).attr("title",i18n($(this).attr("i18n-title")))});$("*[i18n-data-content]").each(function(){$(this).attr("data-content",i18n($(this).attr("i18n-data-content")))});$(document).on("click",".click-open-extension-page",function(){top.location.href=chrome.extension.getURL($(this).data("url"))})});